(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?module.exports=e():typeof define==="function"&&define.amd?define(e):t.eqcol=e()})(this,function(){"use strict";function t(){var t=document.createElement("div");t.setAttribute("data-a-b","c");return Boolean(t.dataset&&t.dataset.aB==="c")}function e(t){return t.dataset}var n=t()?e:function(t){var e={};var n=t.attributes;function r(){return this.value}function i(t,e){if(typeof e==="undefined"){this.removeAttribute(t)}else{this.setAttribute(t,e)}}for(var o=0,a=n.length;o<a;o++){var u=n[o];if(u){var l=u.name;if(l.indexOf("data-")===0){var f=l.slice(5).replace(/-./g,function(t){return t.charAt(1).toUpperCase()});var s=u.value;Object.defineProperty(e,f,{enumerable:true,get:r.bind({value:s||""}),set:i.bind(t,l)})}}}return e};function r(){if(typeof window.CustomEvent==="function"){return true}return false}var i=r()?window.CustomEvent:function(t,e){var n=document.createEvent("CustomEvent");e=e||{bubbles:false,cancelable:false,detail:undefined};n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail);return n};var o=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var l="eqcol";var f={useTallest:true,minHeight:0,byRow:true,groupAttr:"data-"+l,watchAttr:"data-"+l+"-watch"};var s={before:"equal",after:"equaled"};var c=Array.prototype.slice;var h=function(){function t(e,r){u(this,t);this._element=e;this._options=a({},f,n(this._element),r)}t.prototype.equalize=function t(){var e=this;var n=this._getItems();if(n.length===0){return}var r=n.length;var o=new i(s.before,{cancelable:true,detail:{length:r}});this._element.dispatchEvent(o);if(o.defaultPrevented){return}this._reset(n);var a=function t(){var r=c.call(n);var i=[];if(e._options.byRow){(function(){var t=e;var o=n[0].getBoundingClientRect().top;r=r.filter(function(e){if(t._getHeight(e)>0){if(e.getBoundingClientRect().top===o){return true}i.push(e)}return false})})()}if(r.length===1){var o=e._getHeight(r[0]);if(o<e._options.minHeight){r[0].style.height=e._options.minHeight+"px"}else{r[0].style.height="auto"}}else if(r.length>1){(function(){var t=r.map(e._getHeight);var n=e._options.useTallest?Math.max.apply(null,t):Math.min.apply(null,t);n=Math.max(e._options.minHeight,n);r.forEach(function(t){t.style.height=n+"px"})})()}n=i};while(n.length>0){a()}var u=new i(s.after,{detail:{length:r}});this._element.dispatchEvent(u)};t.prototype.destroy=function t(){this._reset()};t.prototype._getHeight=function t(e){return e.offsetHeight};t.prototype._getItems=function t(){var e=this._element.getAttribute(""+this._options.groupAttr)||"";return this._element.querySelectorAll("["+this._options.watchAttr+'="'+e+'"]')};t.prototype._reset=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._getItems();c.call(e).forEach(function(t){t.style.height="auto"})};return t}();var p=function(t,e){if(typeof t==="string"){t=document.querySelectorAll(t)}var n=t instanceof NodeList?c.call(t):[].concat(t);var r=function t(n){var r=new h(n,(typeof e==="undefined"?"undefined":o(e))==="object"&&e);if(typeof e==="string"){r[e]()}else{setTimeout(function(){return r.equalize()})}};for(var i=n,a=Array.isArray(i),u=0,i=a?i:i[Symbol.iterator]();;){var l;if(a){if(u>=i.length)break;l=i[u++]}else{u=i.next();if(u.done)break;l=u.value}var f=l;r(f)}return n};return p});
