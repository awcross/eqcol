(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t():typeof define==="function"&&define.amd?define(t):t()})(this,function(){"use strict";function e(){var e=document.createElement("div");e.setAttribute("data-a-b","c");return Boolean(e.dataset&&e.dataset.aB==="c")}function t(e){return e.dataset}var n=e()?t:function(e){var t={};var n=e.attributes;function r(){return this.value}function i(e,t){if(typeof t==="undefined"){this.removeAttribute(e)}else{this.setAttribute(e,t)}}for(var a=0,o=n.length;a<o;a++){var u=n[a];if(u){var l=u.name;if(l.indexOf("data-")===0){var f=l.slice(5).replace(/-./g,function(e){return e.charAt(1).toUpperCase()});var c=u.value;Object.defineProperty(t,f,{enumerable:true,get:r.bind({value:c||""}),set:i.bind(e,l)})}}}return t};function r(){if(typeof window.CustomEvent==="function"){return true}return false}var i=r()?window.CustomEvent:function(e,t){var n=document.createEvent("CustomEvent");t=t||{bubbles:false,cancelable:false,detail:undefined};n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n};var a=function(){function e(e){this.value=e}function t(t){var n,r;function i(e,t){return new Promise(function(i,o){var u={key:e,arg:t,resolve:i,reject:o,next:null};if(r){r=r.next=u}else{n=r=u;a(e,t)}})}function a(n,r){try{var i=t[n](r);var u=i.value;if(u instanceof e){Promise.resolve(u.value).then(function(e){a("next",e)},function(e){a("throw",e)})}else{o(i.done?"return":"normal",i.value)}}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":n.resolve({value:t,done:true});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:false});break}n=n.next;if(n){a(n.key,n.arg)}else{r=null}}this._invoke=i;if(typeof t.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){t.prototype[Symbol.asyncIterator]=function(){return this}}t.prototype.next=function(e){return this._invoke("next",e)};t.prototype.throw=function(e){return this._invoke("throw",e)};t.prototype.return=function(e){return this._invoke("return",e)};return{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}();var o=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}return function(t,n,r){if(n)e(t.prototype,n);if(r)e(t,r);return t}}();var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};var f=function e(t,n,r){if(t===null)t=Function.prototype;var i=Object.getOwnPropertyDescriptor(t,n);if(i===undefined){var a=Object.getPrototypeOf(t);if(a===null){return undefined}else{return e(a,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var c=function e(t,n,r,i){var a=Object.getOwnPropertyDescriptor(t,n);if(a===undefined){var o=Object.getPrototypeOf(t);if(o!==null){e(o,n,r,i)}}else if("value"in a&&a.writable){a.value=r}else{var u=a.set;if(u!==undefined){u.call(i,r)}}return r};var s="eqcol";var v={useTallest:true,minHeight:0,byRow:true,groupAttr:"data-"+s,watchAttr:"data-"+s+"-watch"};var h={before:"equal",after:"equaled"};var p=Array.prototype.slice;var d=function(){function e(t,r){var i=this;o(this,e);if(typeof t==="string"){this._element=document.querySelector(t)}else if(t.nodeType){this._element=t}this._options=l({},v,n(this._element),r);setTimeout(function(){return i.equalize()},0)}u(e,[{key:"equalize",value:function e(){var t=this;var n=this._getItems();if(!n.length){return}var r=new i(h.before,{cancelable:true});this._element.dispatchEvent(r);if(r.defaultPrevented){return}var a=function e(){var r=p.call(n);var i=[];if(t._options.byRow){(function(){var e=t;var a=n[0].getBoundingClientRect().top;r=r.filter(function(t){if(e._getHeight(t)>0){if(t.getBoundingClientRect().top===a){return true}i.push(t)}return false})})()}if(r.length===1){var a=t._getHeight(r[0]);if(a<t._options.minHeight){r[0].style.height=t._options.minHeight+"px"}else{r[0].style.height="auto"}}else if(r.length>1){(function(){var e=r.map(t._getHeight);var n=t._options.useTallest?Math.max.apply(null,e):Math.min.apply(null,e);n=Math.max(t._options.minHeight,n);r.forEach(function(e){e.style.height=n+"px"})})()}n=i};while(n.length>0){a()}var o=new i(h.after,{cancelable:true});this._element.dispatchEvent(o)}},{key:"destroy",value:function e(){var t=this._getItems();p.call(t).forEach(function(e){e.style.height="auto"})}},{key:"_getItems",value:function e(){var t=this._element.getAttribute(""+this._options.groupAttr)||"";return this._element.querySelectorAll("["+this._options.watchAttr+'="'+t+'"]')}},{key:"_getHeight",value:function e(t){return t.offsetHeight}}]);return e}();module.exports=d});
